(function(){"use strict";function u(e,r,o,t,c){const{w:s,h:l}=o,I=Math.ceil(s/8);for(let d=t;d<c;d++){const S=d%I*8,p=Math.trunc(d/I)*8;for(let n=p;n<p+8&&n<l;n++){const w=n*s;for(let a=S;a<S+8&&a<s;a++){const i=(w+a)*4,M=Math.fround((a+.5)/(s/2)-1),g=Math.fround(1-(n+.5)/(l/2)),h=r(M,g,o);e[i]=h[0]*255,e[i+1]=h[1]*255,e[i+2]=h[2]*255,e[i+3]=h[3]*255}}}}let f=null,E=null;onmessage=async e=>{const[r,...o]=e.data;switch(r){case"init":{const[t,c]=o;E=new Uint8ClampedArray(t);break}case"loadShader":{const[t]=o;f=(await import(t)).fragment,self.postMessage("loaded");break}case"runShader":{if(!f)throw new Error("No shader provided");const[t,c]=o;for(const[s,l]of c)u(E,f,t,s,l);self.postMessage("rendered");break}default:console.warn(`Message "${r}" is not handled.`)}}})();
