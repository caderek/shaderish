(function(){"use strict";function p(t,n,o,e,r){const{w:a,h:l}=o;for(let s=e;s<r;s+=4){const h=s/4,u=h%a,f=Math.trunc(h/a),w=Math.fround((u+.5)/(a/2)-1),g=Math.fround(1-(f+.5)/(l/2)),c=n(w,g,o);t[s]=c[0]*255,t[s+1]=c[1]*255,t[s+2]=c[2]*255,t[s+3]=c[3]*255}}let d=null,i=null;onmessage=async t=>{const[n,...o]=t.data;switch(n){case"init":{const[e,r]=o;i=new Uint8ClampedArray(e);break}case"loadShader":{const[e]=o;d=(await import(e)).fragment,self.postMessage("loaded");break}case"runShader":{if(!d)throw new Error("No shader provided");const[e,r]=o;for(const[a,l]of r)p(i,d,e,a,l);self.postMessage("rendered");break}default:console.warn(`Message "${n}" is not handled.`)}}})();
