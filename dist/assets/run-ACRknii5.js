(function(){"use strict";function i(c,t,s,e,n){const{w:a,h:d}=s;for(let o=e;o<n;o+=4){const f=o/4,h=f%a,p=Math.trunc(f/a),u=(h+.5)/(a/2)-1,w=1-(p+.5)/(d/2);c.set(t(u,w,s),o)}}let r=null,l=null;onmessage=async c=>{const[t,...s]=c.data;switch(t){case"init":{const[e,n]=s;l=new Uint8ClampedArray(e);break}case"loadShader":{const[e]=s;r=(await import(e)).fragment,self.postMessage("loaded");break}case"runShader":{if(!r)throw new Error("No shader provided");const[e,n]=s;for(const[a,d]of n)i(l,r,e,a,d);self.postMessage("rendered");break}default:console.warn(`Message "${t}" is not handled.`)}}})();
