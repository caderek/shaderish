(function(){"use strict";function i(o,e,t,a,n,c){for(let s=n;s<c;s+=4){const f=s/4,u=f%e,h=Math.trunc(f/e),p=(u+.5)/(e/2)-1,m=1-(h+.5)/(e/2);o.set(t(p,m,a),s)}}let r=null,d=null,l=0;onmessage=async o=>{const[e,...t]=o.data;switch(e){case"init":{const[a,n]=t;d=new Uint8ClampedArray(a),l=n;break}case"loadShader":{const[a]=t;r=(await import(a)).fragment,self.postMessage("loaded");break}case"runShader":{if(!r)throw new Error("No shader provided");const[a,n]=t;for(const[c,s]of n)i(d,l,r,a,c,s);self.postMessage("rendered");break}default:console.warn(`Message "${e}" is not handled.`)}}})();
